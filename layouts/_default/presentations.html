{{ define "main" }}
<main class="page presentations-page">
  <header class="page-header">
    <h1>{{ .Title }}</h1>
    <div class="page-intro">
      {{ .Content }}
    </div>
  </header>

  {{ $files := readDir "static/presentations" }}

  {{ if $files }}
    <section class="presentations-grid">
      {{ range sort $files "Name" "asc" }}
        {{ $name := .Name }}
        {{ $ext := lower (delimit (last 1 (split .Name ".")) "") }}
        {{ $base := replaceRE "\\..+$" "" $name }}
        {{ $title := replace $base "-" " " | title }}

        <article class="presentation-card">
          <header class="presentation-header">
            <h2 class="presentation-title">{{ $title }}</h2>
<!--            <span class="presentation-badge">{{ upper $ext }}</span>-->
          </header>

          <div class="presentation-preview">
            {{ if eq $ext "pdf" }}
              <object
                data="/presentations/{{ $name }}#toolbar=0"
                type="application/pdf"
                class="presentation-embed"
              >
                <p>
                  Preview not available.
                  <a href="/presentations/{{ $name }}">Open PDF</a>
                </p>
              </object>
            {{ else if eq $ext "pptx" }}
              <p>ðŸ“Š PowerPoint presentation</p>
            {{ else }}
              <p>ðŸ“Ž File download</p>
            {{ end }}
          </div>

          <footer class="presentation-footer">
            <a href="/presentations/{{ $name }}" download class="btn btn-secondary">
              ðŸ“¥ Download
            </a>
          </footer>
        </article>
      {{ end }}
    </section>
  {{ else }}
    <p>No presentations available yet.</p>
  {{ end }}
</main>
{{ end }}
